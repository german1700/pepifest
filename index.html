<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>PEPIFEST 2025 ‚òÖ Est√°s Invitad@</title>
  
  <!-- Meta tags para compartir -->
  <meta name="description" content="¬°Est√°s invitad@ a PEPIFEST 2025! S√°bado 20 de Diciembre - 8:00 PM">
  <meta property="og:title" content="PEPIFEST 2025 ‚òÖ Invitaci√≥n">
  <meta property="og:description" content="¬°Est√°s invitad@ a PEPIFEST 2025! S√°bado 20 de Diciembre - 8:00 PM">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#ff1493">
  
  <!-- Favicon rosa -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíñ</text></svg>">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@800&family=Fredoka:wght@700&display=swap" rel="stylesheet">
  
  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #000;
      overflow-x: hidden;
    }
    
    /* Ocultar scrollbar pero permitir scroll */
    ::-webkit-scrollbar {
      width: 0px;
      background: transparent;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="module">
    // Importamos las herramientas de Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // 1. CONFIGURACI√ìN (Copia esto de tu consola de Firebase)
    const firebaseConfig = {
      apiKey: "AIzaSyAAw8z9fWBrtVtzI-Wk0lIRBE4vIU7cpE8",
      authDomain: "pepifest-f86de.firebaseapp.com",
      projectId: "pepifest-f86de",
      storageBucket: "pepifest-f86de.firebasestorage.app",
      messagingSenderId: "87814325064",
      appId: "1:87814325064:web:690c12bc4bcd4ace3a697d"
    };

    // 2. INICIALIZAR
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 3. CREAR FUNCIONES GLOBALES (Para que React las pueda usar)
    
    // Funci√≥n para guardar invitado
    window.guardarInvitado = async (nombre) => {
      try {
        await addDoc(collection(db, "asistentes"), {
          nombre: nombre,
          fecha: new Date().toISOString() // Guardamos fecha y hora
        });
        console.log("Invitado guardado en la nube");
      } catch (e) {
        console.error("Error guardando: ", e);
        alert("Hubo un error al conectar con la base de datos.");
        throw e;
      }
    };

    // Funci√≥n para escuchar cambios en vivo (Contador real)
    window.escucharInvitados = (callback) => {
      const q = query(collection(db, "asistentes"), orderBy("fecha", "asc"));
      // onSnapshot se ejecuta cada vez que alguien se registra en cualquier lugar
      return onSnapshot(q, (snapshot) => {
        const lista = snapshot.docs.map(doc => doc.data());
        callback(lista); // Le enviamos la lista nueva a React
      });
    };
  </script>
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;

    // ============================================
    // ‚öôÔ∏è CONFIGURACI√ìN - EDITA AQU√ç
    // ============================================
    const CONFIG = {
      // Cambia esta URL cuando subas tu MP3
      musicUrl: './cancion.mp3',
      
      // URL de Google Maps
      googleMapsUrl: 'https://www.google.com/maps?q=-5.1397729,-80.6358408&z=17&hl=es',
      
      // Fecha del evento (formato: YYYY-MM-DDTHH:MM:SS)
      eventDate: '2025-12-20T20:00:00',
    };

    // ============================================
    // AUDIO CONTROLLER
    // ============================================
    const useAudio = () => {
      const audioContextRef = useRef(null);
      const mainMusicRef = useRef(null);
      const [isMuted, setIsMuted] = useState(false);

      const initAudio = useCallback(() => {
        if (!audioContextRef.current) {
          audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
        }
        return audioContextRef.current;
      }, []);

      const playHackerSound = useCallback(() => {
        const ctx = initAudio();
        if (ctx.state === 'suspended') ctx.resume();

        const duration = 4;
        const now = ctx.currentTime;

        const createOscillator = (freq, type, gainValue, startTime, endTime) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.type = type;
          osc.frequency.setValueAtTime(freq, now);
          osc.frequency.exponentialRampToValueAtTime(freq * 0.5, now + endTime);
          gain.gain.setValueAtTime(0, now);
          gain.gain.linearRampToValueAtTime(gainValue, now + 0.1);
          gain.gain.linearRampToValueAtTime(gainValue * 0.5, now + endTime * 0.7);
          gain.gain.linearRampToValueAtTime(0, now + endTime);
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start(now + startTime);
          osc.stop(now + endTime);
        };

        createOscillator(55, 'sawtooth', 0.08, 0, duration);
        createOscillator(110, 'square', 0.05, 0, duration);

        for (let i = 0; i < 20; i++) {
          const startTime = Math.random() * (duration - 0.5);
          const freq = 800 + Math.random() * 2000;
          createOscillator(freq, 'sine', 0.03, startTime, startTime + 0.05 + Math.random() * 0.1);
        }

        const sweepOsc = ctx.createOscillator();
        const sweepGain = ctx.createGain();
        sweepOsc.type = 'sawtooth';
        sweepOsc.frequency.setValueAtTime(100, now);
        sweepOsc.frequency.exponentialRampToValueAtTime(2000, now + duration * 0.5);
        sweepOsc.frequency.exponentialRampToValueAtTime(50, now + duration);
        sweepGain.gain.setValueAtTime(0.05, now);
        sweepGain.gain.linearRampToValueAtTime(0, now + duration);
        sweepOsc.connect(sweepGain);
        sweepGain.connect(ctx.destination);
        sweepOsc.start(now);
        sweepOsc.stop(now + duration);

        const bufferSize = ctx.sampleRate * duration;
        const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
        const output = noiseBuffer.getChannelData(0);
        for (let i = 0; i < bufferSize; i++) {
          output[i] = Math.random() * 2 - 1;
        }
        const noise = ctx.createBufferSource();
        const noiseGain = ctx.createGain();
        const noiseFilter = ctx.createBiquadFilter();
        noise.buffer = noiseBuffer;
        noiseFilter.type = 'bandpass';
        noiseFilter.frequency.setValueAtTime(1000, now);
        noiseFilter.frequency.linearRampToValueAtTime(5000, now + duration);
        noiseFilter.Q.value = 1;
        noiseGain.gain.setValueAtTime(0.03, now);
        noiseGain.gain.linearRampToValueAtTime(0, now + duration);
        noise.connect(noiseFilter);
        noiseFilter.connect(noiseGain);
        noiseGain.connect(ctx.destination);
        noise.start(now);
        noise.stop(now + duration);
      }, [initAudio]);

      const playMainMusic = useCallback(() => {
        if (!mainMusicRef.current) {
          mainMusicRef.current = new Audio(CONFIG.musicUrl);
          mainMusicRef.current.loop = true;
          mainMusicRef.current.volume = 0.5;
        }
        mainMusicRef.current.play().catch(e => console.log('Music play error:', e));
      }, []);

      const toggleMute = useCallback(() => {
        if (mainMusicRef.current) {
          mainMusicRef.current.muted = !mainMusicRef.current.muted;
          setIsMuted(!isMuted);
        }
      }, [isMuted]);

      return { playHackerSound, playMainMusic, toggleMute, isMuted };
    };

    // ============================================
    // ENTRY SCREEN
    // ============================================
    const EntryScreen = ({ onEnter }) => {
      const canvasRef = useRef(null);
      const [glitchText, setGlitchText] = useState('PEPIFEST');

      useEffect(() => {
        const canvas = canvasRef.current;
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const characters = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥@#$%ABCDEF';
        const fontSize = 12;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        const draw = () => {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.03)';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.font = `${fontSize}px monospace`;
          
          for (let i = 0; i < drops.length; i++) {
            const text = characters[Math.floor(Math.random() * characters.length)];
            const pinkShades = ['#ff1493', '#ff69b4', '#ff00ff', '#ff007f'];
            ctx.fillStyle = pinkShades[Math.floor(Math.random() * pinkShades.length)];
            ctx.globalAlpha = 0.3;
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            ctx.globalAlpha = 1;
            
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.98) {
              drops[i] = 0;
            }
            drops[i]++;
          }
        };

        const interval = setInterval(draw, 50);

        const glitchChars = '!@#$%^&*()_+-=[]{}|;:,.<>?';
        const originalText = 'PEPIFEST';
        const glitchInterval = setInterval(() => {
          if (Math.random() > 0.7) {
            let newText = '';
            for (let i = 0; i < originalText.length; i++) {
              if (Math.random() > 0.8) {
                newText += glitchChars[Math.floor(Math.random() * glitchChars.length)];
              } else {
                newText += originalText[i];
              }
            }
            setGlitchText(newText);
            setTimeout(() => setGlitchText(originalText), 100);
          }
        }, 200);

        const handleResize = () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        };
        window.addEventListener('resize', handleResize);

        return () => {
          clearInterval(interval);
          clearInterval(glitchInterval);
          window.removeEventListener('resize', handleResize);
        };
      }, []);

      return (
        <div className="fixed inset-0 z-50 bg-black flex items-center justify-center overflow-hidden">
          <canvas ref={canvasRef} className="absolute inset-0" />
          
          <div className="absolute inset-0 pointer-events-none opacity-20" style={{
            backgroundImage: 'repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.5) 2px, rgba(0,0,0,0.5) 4px)'
          }}></div>

          <div className="absolute inset-0 pointer-events-none" style={{
            background: 'radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.5) 100%)'
          }}></div>

          <div className="relative z-10 text-center px-4">
            <div className="bg-black/80 border border-pink-500/50 rounded-lg p-6 sm:p-8 backdrop-blur-sm max-w-md mx-auto">
              <div className="flex items-center gap-2 mb-6 pb-3 border-b border-pink-500/30">
                <div className="w-3 h-3 rounded-full bg-pink-500"></div>
                <div className="w-3 h-3 rounded-full bg-pink-400"></div>
                <div className="w-3 h-3 rounded-full bg-pink-300"></div>
                <span className="ml-2 text-pink-500/60 text-xs font-mono">system://invitation.exe</span>
              </div>

              <div className="mb-6">
                <p className="text-pink-500/60 text-xs font-mono mb-2 animate-pulse">&gt; LOADING INVITATION...</p>
                <h1 
                  className="text-4xl sm:text-5xl font-black font-mono text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-pink-300 to-pink-500"
                  style={{ textShadow: '0 0 10px #ff1493, 0 0 20px #ff1493, 0 0 30px #ff1493' }}
                >
                  {glitchText}
                </h1>
              </div>

              <div className="text-left mb-6 font-mono text-xs space-y-1">
                <p className="text-pink-400">&gt; STATUS: <span className="text-green-400">READY</span></p>
                <p className="text-pink-400">&gt; DATE: <span className="text-pink-300">20.12.2025</span></p>
                <p className="text-pink-400">&gt; ACCESS: <span className="text-yellow-400 animate-pulse">GRANTED</span></p>
              </div>

              <button
                onClick={onEnter}
                className="group relative w-full py-4 bg-transparent border-2 border-pink-500 rounded font-mono font-bold text-pink-400 uppercase tracking-widest overflow-hidden transition-all hover:bg-pink-500 hover:text-black hover:shadow-[0_0_30px_#ff1493]"
              >
                <span className="relative z-10 flex items-center justify-center gap-2">
                  <span className="animate-pulse">[</span>
                  ENTRAR
                  <span className="animate-pulse">]</span>
                </span>
                <div className="absolute inset-0 bg-gradient-to-b from-transparent via-pink-400/20 to-transparent -translate-y-full group-hover:translate-y-full transition-transform duration-700"></div>
              </button>

              <p className="mt-4 text-pink-500/40 text-xs font-mono animate-pulse">
                ‚ñ∂ CLICK TO INITIALIZE AUDIO SYSTEM
              </p>
            </div>

            <div className="absolute -top-20 -left-20 w-40 h-40 border border-pink-500/20 rounded-full animate-spin" style={{ animationDuration: '20s' }}></div>
            <div className="absolute -bottom-20 -right-20 w-60 h-60 border border-pink-500/10 rounded-full animate-spin" style={{ animationDuration: '30s', animationDirection: 'reverse' }}></div>
          </div>
        </div>
      );
    };

    // ============================================
    // HACKER ANIMATION
    // ============================================
    const HackerAnimation = ({ onComplete }) => {
      const canvasRef = useRef(null);
      const [fadeOut, setFadeOut] = useState(false);

      useEffect(() => {
        const canvas = canvasRef.current;
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const characters = '„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%^&*()‚òÖ‚ô°‚òÜ‚ô•';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        const draw = () => {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.font = `${fontSize}px monospace`;
          
          for (let i = 0; i < drops.length; i++) {
            const text = characters[Math.floor(Math.random() * characters.length)];
            const y2kColors = ['#ff1493', '#ff69b4', '#00ffff', '#ff00ff', '#ff007f', '#7b68ee', '#da70d6'];
            ctx.fillStyle = y2kColors[Math.floor(Math.random() * y2kColors.length)];
            ctx.shadowColor = '#ff00ff';
            ctx.shadowBlur = 15;
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
              drops[i] = 0;
            }
            drops[i]++;
          }
        };

        const interval = setInterval(draw, 35);
        const fadeTimer = setTimeout(() => setFadeOut(true), 3500);
        const completeTimer = setTimeout(() => onComplete(), 4500);

        const handleResize = () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        };
        window.addEventListener('resize', handleResize);

        return () => {
          clearInterval(interval);
          clearTimeout(fadeTimer);
          clearTimeout(completeTimer);
          window.removeEventListener('resize', handleResize);
        };
      }, [onComplete]);

      return (
        <div className={`fixed inset-0 z-50 bg-black transition-opacity duration-1000 ${fadeOut ? 'opacity-0' : 'opacity-100'}`}>
          <canvas ref={canvasRef} className="w-full h-full" />
          <div className="absolute inset-0 flex items-center justify-center">
            <p className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 text-sm tracking-[0.5em] font-mono animate-pulse">
              INITIALIZING...
            </p>
          </div>
        </div>
      );
    };

    // ============================================
    // BUBBLE LETTERS
    // ============================================
    const BubbleLetter = ({ letter, index }) => (
      <span 
        className="inline-block relative animate-bounce"
        style={{ animationDelay: `${index * 0.1}s`, animationDuration: '2s' }}
      >
        <span
          className="relative inline-block text-5xl sm:text-6xl md:text-7xl font-black"
          style={{
            fontFamily: "'Baloo 2', 'Fredoka', cursive",
            color: '#ff69b4',
            textShadow: '0 2px 0 #ff1493, 0 4px 0 #db2777, 0 6px 0 #be185d, 0 8px 0 #9d174d, 0 10px 15px rgba(219, 39, 119, 0.4), 0 0 30px rgba(255, 105, 180, 0.5)',
            WebkitTextStroke: '1px #ff1493',
            transform: 'perspective(500px) rotateX(5deg)',
            filter: 'drop-shadow(0 8px 16px rgba(219, 39, 119, 0.5))'
          }}
        >
          {letter}
        </span>
      </span>
    );

    const BubbleTitle = ({ text }) => (
      <div className="relative">
        <div className="absolute inset-0 blur-3xl bg-pink-500/30 scale-150"></div>
        <div className="relative flex justify-center items-center gap-0 sm:gap-1">
          {text.split('').map((letter, index) => (
            <BubbleLetter key={index} letter={letter} index={index} />
          ))}
        </div>
      </div>
    );

    // ============================================
    // DECORATIVE
    // ============================================
    const Y2KStar = ({ className, style }) => (
      <svg className={className} style={style} viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 0L14.59 8.41L23 11L14.59 13.59L12 22L9.41 13.59L1 11L9.41 8.41L12 0Z" />
      </svg>
    );

    const DrinkIcon = () => (
      <svg viewBox="0 0 64 64" className="w-10 h-10" fill="none">
        <path d="M20 8L32 28L44 8H20Z" fill="url(#drinkGradient)" stroke="#ff69b4" strokeWidth="2"/>
        <path d="M23 12L32 24L41 12H23Z" fill="#ff1493" opacity="0.6"/>
        <rect x="30" y="28" width="4" height="16" fill="url(#stemGradient)" rx="1"/>
        <ellipse cx="32" cy="48" rx="10" ry="3" fill="url(#baseGradient)"/>
        <circle cx="42" cy="12" r="6" fill="#00ff88" stroke="#00cc66" strokeWidth="1.5"/>
        <path d="M42 8V16M38 12H46" stroke="#00cc66" strokeWidth="1"/>
        <circle cx="28" cy="18" r="1.5" fill="white" opacity="0.7"/>
        <rect x="36" y="2" width="2" height="22" fill="#ff00ff" rx="1" transform="rotate(15 37 13)"/>
        <defs>
          <linearGradient id="drinkGradient" x1="20" y1="8" x2="44" y2="28">
            <stop offset="0%" stopColor="#ffd1e8"/><stop offset="100%" stopColor="#ffb6d9"/>
          </linearGradient>
          <linearGradient id="stemGradient" x1="30" y1="28" x2="34" y2="44">
            <stop offset="0%" stopColor="#ffd1e8"/><stop offset="100%" stopColor="#ff69b4"/>
          </linearGradient>
          <linearGradient id="baseGradient" x1="22" y1="48" x2="42" y2="48">
            <stop offset="0%" stopColor="#ff69b4"/><stop offset="50%" stopColor="#ffd1e8"/><stop offset="100%" stopColor="#ff69b4"/>
          </linearGradient>
        </defs>
      </svg>
    );

    const BeerIcon = () => (
      <svg viewBox="0 0 64 64" className="w-10 h-10" fill="none">
        <rect x="12" y="16" width="28" height="38" rx="4" fill="url(#mugGradient)" stroke="#ffb347" strokeWidth="2"/>
        <rect x="14" y="22" width="24" height="30" rx="2" fill="#ffc107"/>
        <rect x="14" y="22" width="24" height="8" rx="2" fill="#ffeb3b" opacity="0.5"/>
        <ellipse cx="26" cy="20" rx="14" ry="6" fill="white"/>
        <circle cx="18" cy="18" r="4" fill="white"/><circle cx="26" cy="16" r="5" fill="white"/>
        <circle cx="34" cy="18" r="4" fill="white"/><circle cx="22" cy="14" r="3" fill="white"/>
        <circle cx="30" cy="14" r="3" fill="white"/>
        <path d="M40 24C48 24 52 28 52 36C52 44 48 48 40 48" stroke="#ffb347" strokeWidth="4" fill="none" strokeLinecap="round"/>
        <circle cx="20" cy="40" r="1.5" fill="white" opacity="0.5"/>
        <defs>
          <linearGradient id="mugGradient" x1="12" y1="16" x2="40" y2="54">
            <stop offset="0%" stopColor="#ffe4b5"/><stop offset="100%" stopColor="#ffcc80"/>
          </linearGradient>
        </defs>
      </svg>
    );

    // ============================================
    // COUNTDOWN
    // ============================================
    const CountdownTimer = ({ targetDate }) => {
      const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

      useEffect(() => {
        const calculateTime = () => {
          const now = new Date().getTime();
          const target = new Date(targetDate).getTime();
          const difference = target - now;

          if (difference > 0) {
            setTimeLeft({
              days: Math.floor(difference / (1000 * 60 * 60 * 24)),
              hours: Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
              minutes: Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60)),
              seconds: Math.floor((difference % (1000 * 60)) / 1000)
            });
          }
        };

        calculateTime();
        const interval = setInterval(calculateTime, 1000);
        return () => clearInterval(interval);
      }, [targetDate]);

      const TimeBlock = ({ value, label }) => (
        <div className="flex flex-col items-center">
          <div className="relative">
            <div className="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-pink-200 via-white to-pink-300 rounded-2xl p-[2px] shadow-lg shadow-pink-500/30">
              <div className="w-full h-full bg-gradient-to-br from-fuchsia-950 via-purple-900 to-pink-950 rounded-2xl flex items-center justify-center relative overflow-hidden">
                <div className="absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-transparent"></div>
                <span className="relative text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white via-pink-200 to-pink-400 font-mono">
                  {String(value).padStart(2, '0')}
                </span>
              </div>
            </div>
          </div>
          <span className="text-[10px] sm:text-xs text-pink-300/80 mt-2 uppercase tracking-[0.15em] font-bold">{label}</span>
        </div>
      );

      return (
        <div className="flex gap-2 sm:gap-3 justify-center items-start">
          <TimeBlock value={timeLeft.days} label="D√≠as" />
          <span className="text-pink-400 text-2xl font-bold mt-4 animate-pulse">:</span>
          <TimeBlock value={timeLeft.hours} label="Horas" />
          <span className="text-pink-400 text-2xl font-bold mt-4 animate-pulse">:</span>
          <TimeBlock value={timeLeft.minutes} label="Min" />
          <span className="text-pink-400 text-2xl font-bold mt-4 animate-pulse">:</span>
          <TimeBlock value={timeLeft.seconds} label="Seg" />
        </div>
      );
    };

    // ============================================
    // CONFIRMATION MODAL
    // ============================================
    const ConfirmationModal = ({ isOpen, onClose, onSubmit }) => {
      const [name, setName] = useState('');
      const [isSubmitting, setIsSubmitting] = useState(false);
      const [submitted, setSubmitted] = useState(false);

      const handleSubmit = async () => {
        if (!name.trim()) return;
        setIsSubmitting(true);
        await onSubmit(name.trim());
        setIsSubmitting(false);
        setSubmitted(true);
        setTimeout(() => {
          setSubmitted(false);
          setName('');
          onClose();
        }, 2500);
      };

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 z-40 flex items-center justify-center p-4">
          <div className="absolute inset-0 bg-black/80 backdrop-blur-md" onClick={onClose}></div>
          
          <div className="relative w-full max-w-sm">
            <Y2KStar className="absolute -top-6 -left-4 w-8 h-8 text-cyan-400 animate-spin" style={{ animationDuration: '8s' }} />
            <Y2KStar className="absolute -top-4 -right-6 w-6 h-6 text-pink-400 animate-spin" style={{ animationDuration: '6s', animationDirection: 'reverse' }} />
            
            <div className="bg-gradient-to-br from-pink-300 via-white to-cyan-300 rounded-3xl p-[3px] shadow-2xl shadow-pink-500/40">
              <div className="bg-gradient-to-br from-purple-950 via-fuchsia-950 to-pink-950 rounded-3xl p-6 relative overflow-hidden">
                {!submitted ? (
                  <>
                    <button onClick={onClose} className="absolute top-4 right-4 w-8 h-8 rounded-full bg-pink-500/20 border border-pink-400/30 flex items-center justify-center text-pink-300 hover:bg-pink-500/40">‚úï</button>
                    
                    <div className="text-center mb-6">
                      <div className="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-400 via-purple-400 to-cyan-400 p-[3px]">
                        <div className="w-full h-full rounded-full bg-gradient-to-br from-fuchsia-900 to-purple-950 flex items-center justify-center">
                          <span className="text-3xl">üíñ</span>
                        </div>
                      </div>
                      <h3 className="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-white to-cyan-300">¬°Confirma!</h3>
                      <p className="text-sm text-pink-300/70">Nos encantar√≠a verte ‚ú®</p>
                    </div>
                    
                    <div className="space-y-4">
                      <div>
                        <label className="block text-xs text-pink-300 mb-2 uppercase tracking-wider font-bold">‚òÖ Tu Nombre ‚òÖ</label>
                        <input
                          type="text"
                          value={name}
                          onChange={(e) => setName(e.target.value)}
                          placeholder="Escribe tu nombre..."
                          className="w-full px-4 py-3 bg-black/40 border-2 border-pink-400/40 rounded-xl text-white placeholder-pink-300/40 focus:outline-none focus:border-pink-400"
                          autoFocus
                        />
                      </div>
                      
                      <button
                        onClick={handleSubmit}
                        disabled={!name.trim() || isSubmitting}
                        className="w-full py-4 bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-500 hover:from-pink-400 hover:via-fuchsia-400 hover:to-purple-400 disabled:from-gray-600 disabled:to-gray-700 text-white font-black rounded-xl transition-all uppercase tracking-wider"
                      >
                        {isSubmitting ? 'Confirmando...' : '‚ô° Confirmar ‚ô°'}
                      </button>
                    </div>
                  </>
                ) : (
                  <div className="text-center py-8">
                    <div className="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-400 via-purple-400 to-cyan-400 p-[3px] animate-pulse">
                      <div className="w-full h-full rounded-full bg-gradient-to-br from-fuchsia-900 to-purple-950 flex items-center justify-center">
                        <span className="text-4xl">üéâ</span>
                      </div>
                    </div>
                    <h3 className="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-white to-cyan-300">¬°Confirmado!</h3>
                    <p className="text-pink-300/80">Te esperamos, {name} ‚ô°</p>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============================================
    // MUSIC BUTTON
    // ============================================
    const MusicButton = ({ isMuted, onToggle }) => (
      <button
        onClick={onToggle}
        className="fixed bottom-4 right-4 z-30 w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center shadow-lg shadow-pink-500/30 hover:scale-110 transition-transform"
      >
        {isMuted ? (
          <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" />
          </svg>
        ) : (
          <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
          </svg>
        )}
      </button>
    );

    // ============================================
    // MAIN APP
    // ============================================
    function App() {
      const [currentScreen, setCurrentScreen] = useState('entry');
      const [showModal, setShowModal] = useState(false);
      const [guests, setGuests] = useState([]);
      const [mainVisible, setMainVisible] = useState(false);
      
      const audio = useAudio();

      useEffect(() => {
        // Load guests from localStorage
        const saved = localStorage.getItem('pepifest-guests');
        if (saved) setGuests(JSON.parse(saved));
      }, []);

      const handleEnter = () => {
        audio.playHackerSound();
        setCurrentScreen('animation');
      };

      const handleAnimationComplete = () => {
        setCurrentScreen('main');
        audio.playMainMusic();
        setTimeout(() => setMainVisible(true), 100);
      };

      const handleConfirmation = async (name) => {
        const newGuests = [...guests, { name, timestamp: new Date().toISOString() }];
        setGuests(newGuests);
        localStorage.setItem('pepifest-guests', JSON.stringify(newGuests));
      };

      const openMaps = () => window.open(CONFIG.googleMapsUrl, '_blank');

      return (
        <div className="min-h-screen bg-gradient-to-b from-pink-950 via-fuchsia-950 to-black text-white overflow-hidden">
          {/* Background */}
          <div className="fixed inset-0 pointer-events-none">
            <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-gradient-to-br from-fuchsia-600/30 via-purple-600/20 to-transparent rounded-full blur-[100px]"></div>
            <div className="absolute bottom-0 left-0 w-[400px] h-[400px] bg-gradient-to-tr from-cyan-500/20 via-pink-500/20 to-transparent rounded-full blur-[80px]"></div>
            <div className="absolute inset-0 opacity-[0.03]" style={{
              backgroundImage: 'linear-gradient(rgba(255,0,255,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(255,0,255,0.3) 1px, transparent 1px)',
              backgroundSize: '50px 50px'
            }}></div>
            <Y2KStar className="absolute top-20 left-8 w-4 h-4 text-pink-400/40 animate-pulse" />
            <Y2KStar className="absolute top-40 right-12 w-3 h-3 text-cyan-400/40 animate-pulse" style={{ animationDelay: '0.5s' }} />
            <Y2KStar className="absolute bottom-32 left-16 w-5 h-5 text-purple-400/40 animate-pulse" style={{ animationDelay: '1s' }} />
          </div>

          {currentScreen === 'entry' && <EntryScreen onEnter={handleEnter} />}
          {currentScreen === 'animation' && <HackerAnimation onComplete={handleAnimationComplete} />}

          {currentScreen === 'main' && (
            <>
              <div className={`relative z-10 min-h-screen flex flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ${mainVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'}`}>
                
                <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-pink-400 to-transparent"></div>
                
                {/* Header */}
                <div className="text-center mb-6 sm:mb-8 relative">
                  <Y2KStar className="absolute -top-8 -left-4 w-8 h-8 text-cyan-400 animate-spin" style={{ animationDuration: '12s' }} />
                  <Y2KStar className="absolute -top-6 -right-2 w-6 h-6 text-pink-400 animate-spin" style={{ animationDuration: '8s', animationDirection: 'reverse' }} />
                  
                  <p className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-300 to-cyan-400 text-xs sm:text-sm tracking-[0.4em] uppercase mb-6 font-bold animate-pulse">
                    ‚òÖ Est√°s Invitad@ ‚òÖ
                  </p>
                  
                  <BubbleTitle text="PEPIFEST" />
                  
                  <div className="flex items-center justify-center gap-4 mt-6">
                    <div className="h-[2px] w-16 bg-gradient-to-r from-transparent via-pink-400 to-cyan-400 rounded-full"></div>
                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 text-sm tracking-[0.3em] font-bold">2025</span>
                    <div className="h-[2px] w-16 bg-gradient-to-l from-transparent via-cyan-400 to-pink-400 rounded-full"></div>
                  </div>
                </div>

                {/* Countdown */}
                <div className="mb-8 sm:mb-10">
                  <p className="text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400 text-xs tracking-[0.3em] uppercase mb-6 font-bold">
                    ‚úß Cuenta Regresiva ‚úß
                  </p>
                  <CountdownTimer targetDate={CONFIG.eventDate} />
                </div>

                {/* Event Details */}
                <div className="w-full max-w-sm mb-6 relative">
                  <div className="bg-gradient-to-br from-pink-300 via-white to-cyan-300 rounded-3xl p-[2px] shadow-xl shadow-pink-500/20">
                    <div className="bg-gradient-to-br from-purple-950/95 via-fuchsia-950/95 to-pink-950/95 rounded-3xl p-5 relative overflow-hidden">
                      <div className="space-y-4 relative">
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-400 to-purple-500 p-[2px] shadow-lg shadow-pink-500/30">
                            <div className="w-full h-full rounded-xl bg-purple-950 flex items-center justify-center">
                              <span className="text-xl">üìÖ</span>
                            </div>
                          </div>
                          <div>
                            <p className="text-[10px] text-pink-400/80 uppercase tracking-wider font-bold">Fecha</p>
                            <p className="text-white font-bold">S√°bado 20 de Diciembre</p>
                          </div>
                        </div>
                        
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-500 p-[2px] shadow-lg shadow-cyan-500/30">
                            <div className="w-full h-full rounded-xl bg-purple-950 flex items-center justify-center">
                              <span className="text-xl">üïó</span>
                            </div>
                          </div>
                          <div>
                            <p className="text-[10px] text-cyan-400/80 uppercase tracking-wider font-bold">Hora</p>
                            <p className="text-white font-bold">8:00 PM</p>
                          </div>
                        </div>
                        
                        <button onClick={openMaps} className="w-full flex items-center gap-4 group hover:bg-white/5 rounded-xl p-2 -m-2 transition-all">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-400 via-purple-400 to-cyan-400 p-[2px] shadow-lg shadow-purple-500/30">
                            <div className="w-full h-full rounded-xl bg-purple-950 flex items-center justify-center group-hover:bg-purple-900 transition-colors">
                              <span className="text-xl">üìç</span>
                            </div>
                          </div>
                          <div className="flex-1 text-left">
                            <p className="text-[10px] text-purple-400/80 uppercase tracking-wider font-bold">Ubicaci√≥n</p>
                            <p className="text-white font-bold group-hover:text-pink-300 transition-colors flex items-center gap-2">
                              Ver en Google Maps
                              <svg className="w-4 h-4 text-pink-400 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                              </svg>
                            </p>
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                  <Y2KStar className="absolute -top-3 -right-3 w-6 h-6 text-cyan-400/60 animate-pulse" />
                </div>

                {/* Dress Code */}
                <div className="w-full max-w-sm mb-6">
                  <div className="bg-gradient-to-r from-gray-800 via-white to-gray-800 rounded-2xl p-[2px] shadow-lg">
                    <div className="bg-gradient-to-br from-gray-950 via-purple-950/90 to-gray-950 rounded-2xl p-4 relative overflow-hidden">
                      <div className="flex items-center justify-center gap-4 relative">
                        <div className="w-8 h-8 rounded-full bg-white shadow-lg shadow-white/30"></div>
                        <div className="text-center">
                          <p className="text-[10px] text-pink-400/80 uppercase tracking-wider font-bold mb-1">‚òÖ Dress Code ‚òÖ</p>
                          <p className="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-300 to-white">
                            BLANCO Y NEGRO
                          </p>
                        </div>
                        <div className="w-8 h-8 rounded-full bg-black border-2 border-gray-600 shadow-lg"></div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Bring Drinks */}
                <div className="w-full max-w-sm mb-8">
                  <div className="bg-gradient-to-br from-pink-300 via-yellow-200 to-cyan-300 rounded-2xl p-[2px] shadow-lg shadow-pink-500/20">
                    <div className="bg-gradient-to-br from-purple-950/95 via-fuchsia-950/95 to-pink-950/95 rounded-2xl p-4">
                      <div className="flex items-center justify-center gap-3">
                        <div className="animate-bounce" style={{ animationDuration: '2s' }}><DrinkIcon /></div>
                        <div className="text-center">
                          <p className="text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-white to-cyan-300">
                            ¬°No olvides traer!
                          </p>
                          <p className="text-xs text-pink-300/70 mt-1">Tu trago o cerveza favorita üçª</p>
                        </div>
                        <div className="animate-bounce" style={{ animationDuration: '2s', animationDelay: '0.5s' }}><BeerIcon /></div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* CTA Button */}
                <button
                  onClick={() => setShowModal(true)}
                  className="group relative px-10 py-4 rounded-full font-black text-white uppercase tracking-wider transition-all duration-300 transform hover:scale-105 active:scale-95"
                >
                  <div className="absolute inset-0 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 rounded-full p-[3px]">
                    <div className="w-full h-full bg-gradient-to-r from-fuchsia-600 via-purple-600 to-pink-600 rounded-full"></div>
                  </div>
                  <span className="relative z-10 flex items-center gap-2">
                    <span className="text-lg">‚ô°</span>
                    Confirmar Asistencia
                    <span className="text-lg">‚ô°</span>
                  </span>
                  <div className="absolute inset-0 rounded-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 opacity-0 group-hover:opacity-50 transition-opacity blur-xl"></div>
                </button>

                {guests.length > 0 && (
                  <div className="mt-6 px-4 py-2 rounded-full bg-gradient-to-r from-pink-500/10 to-purple-500/10 border border-pink-500/20">
                    <p className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 text-xs font-bold">
                      ‚òÖ {guests.length} {guests.length === 1 ? 'persona ha confirmado' : 'personas han confirmado'} ‚òÖ
                    </p>
                  </div>
                )}

                <div className="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent"></div>
              </div>

              <MusicButton isMuted={audio.isMuted} onToggle={audio.toggleMute} />
              <ConfirmationModal isOpen={showModal} onClose={() => setShowModal(false)} onSubmit={handleConfirmation} />
            </>
          )}
        </div>
      );
    }

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
